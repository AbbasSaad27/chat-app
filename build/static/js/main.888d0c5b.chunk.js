(this["webpackJsonpanonymous-chat-app"]=this["webpackJsonpanonymous-chat-app"]||[]).push([[0],{21:function(e,t,n){},22:function(e,t,n){},27:function(e,t,n){},29:function(e,t,n){},30:function(e,t,n){},31:function(e,t,n){},32:function(e,t,n){"use strict";n.r(t);var a=n(6),c=n.n(a),s=n(15),r=n.n(s),o=(n(21),n(16)),i=n(11),u=(n(22),n(8)),l=n.n(u),d=n(12),h=n(10);n(24),n(33);h.a.initializeApp({apiKey:"AIzaSyAC_mfgYDLtAR_zhrZYPjhIL5Puqz7Wtuc",authDomain:"chat-app-fe69c.firebaseapp.com",projectId:"chat-app-fe69c",storageBucket:"chat-app-fe69c.appspot.com",messagingSenderId:"22233064636",appId:"1:22233064636:web:1798f7636f735bb1e65cb9",measurementId:"G-N3JDJGP02N"});var p=h.a.auth(),m=h.a.firestore(),j=new h.a.auth.GoogleAuthProvider;j.setCustomParameters({prompt:"select_account"});var f,b=new h.a.auth.FacebookAuthProvider,O=h.a.firestore.FieldValue.serverTimestamp,x=function(){var e=Object(d.a)(l.a.mark((function e(t){var n,a,c,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return f=t,n=m.doc("users/".concat(t.uid)),e.next=6,n.get();case 6:return e.sent.exists||(a=t.displayName,c=t.email,s=t.photoURL,n.set({displayName:a,email:c,photoURL:s,createdAt:O()})),e.abrupt("return",n);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(d.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=m.collection("messages")).add({uid:f.uid,text:t,photoURL:f.photoURL,createdAt:O()}),e.abrupt("return",n);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(){return p.signInWithPopup(j)},N=function(){return p.signInWithRedirect(b)},y=(n(27),n(3)),S=function(e){var t=e.children,n=e.classname,a=e.func,c=e.type;return Object(y.jsx)("button",{type:"".concat(c||"button"),className:"btn ".concat(n||""),onClick:a,children:t})},L=(n(29),function(e){var t=e.children,n=e.photoURL,a=e.classname,c=e.photoclass;return Object(y.jsxs)("div",{className:"message-container",children:[Object(y.jsx)("img",{className:"userPhoto ".concat(c," "),src:"".concat(n),alt:"userphoto"}),Object(y.jsx)("div",{className:"message ".concat(a),children:Object(y.jsx)("p",{className:"text",children:t})})]})}),w=(n(30),function(e){var t=e.user,n=e.docs,c=Object(a.useState)(""),s=Object(i.a)(c,2),r=s[0],o=s[1],u=Object(a.useState)(n),h=Object(i.a)(u,2),m=h[0],j=h[1],f=Object(a.useRef)(null);Object(a.useEffect)((function(){f.current.scrollIntoView({behavior:"smooth"})}),[m]);var b=function(){var e=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,g(r);case 3:e.sent.orderBy("createdAt","asc").limitToLast(35).onSnapshot((function(e){var t=e.docs;j(t)})),o("");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(y.jsxs)("div",{className:"chat-ui",children:[Object(y.jsxs)("header",{className:"head",children:[Object(y.jsxs)("div",{className:"user-info",children:[Object(y.jsx)("img",{className:"userPhoto user-pic",src:"".concat(t.photoURL),alt:"userPhoto"}),Object(y.jsxs)("p",{className:"user-name",children:["Logged in as ",t.displayName]})]}),Object(y.jsx)(S,{func:function(){return p.signOut()},classname:"ui-btn ui-btn-top",children:"Sign Out"})]}),Object(y.jsxs)("main",{className:"message-box",children:[m[0]?m.map((function(e){var n=e.data();return Object(y.jsx)(L,{photoURL:n.photoURL,classname:n.uid===t.uid?"own":"other",photoclass:n.uid===t.uid?"self-user":"other-user",children:n.text},e.id)})):"",Object(y.jsx)("div",{className:"dummy",ref:f})]}),Object(y.jsx)("footer",{className:"send-message",children:Object(y.jsxs)("form",{className:"message-form",onSubmit:b,children:[Object(y.jsx)("textarea",{type:"text",name:"message",placeholder:"Type a message",value:r,onChange:function(e){o(e.target.value)},className:"typer",required:!0}),Object(y.jsx)(S,{type:"submit",classname:"ui-btn ui-btn-bottom",children:"Send"})]})})]})}),I=(n(31),function(){return Object(y.jsxs)("div",{className:"sign-in",children:[Object(y.jsx)("h1",{className:"title",children:"Can't think of a Name"}),Object(y.jsx)("span",{className:"sub-title",children:"Sign in to chat"}),Object(y.jsx)(S,{classname:"google",func:v,children:"Sign In With Google"}),Object(y.jsx)(S,{classname:"faceBook",func:N,children:"Sign In With FaceBook"})]})});var k=function(){var e=Object(a.useState)(null),t=Object(i.a)(e,2),n=t[0],c=t[1],s=Object(a.useState)(null),r=Object(i.a)(s,2),u=r[0],l=r[1];return Object(a.useEffect)((function(){var e=p.onAuthStateChanged((function(e){e?(x(e).then((function(e){return e.onSnapshot((function(e){c(Object(o.a)({uid:e.id},e.data()))}))})),m.collection("messages").orderBy("createdAt","asc").limitToLast(35).onSnapshot((function(e){l(e.docs)}))):c(e)}));return function(){return e()}}),[]),Object(y.jsx)("div",{className:"App",children:n&&u?Object(y.jsx)(w,{user:n,docs:u}):Object(y.jsx)(I,{})})},A=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,34)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,s=t.getLCP,r=t.getTTFB;n(e),a(e),c(e),s(e),r(e)}))};r.a.render(Object(y.jsx)(c.a.StrictMode,{children:Object(y.jsx)(k,{})}),document.getElementById("root")),A()}},[[32,1,2]]]);
//# sourceMappingURL=main.888d0c5b.chunk.js.map